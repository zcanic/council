
# è®®ä¼šå›ç¯ - Parliament Loop

> **ä¸€ä¸ªèƒ½æŠŠ10æ¡è®¨è®ºè‡ªåŠ¨æ€»ç»“æˆ1æ¡æ™ºæ…§çš„AIå¯¹è¯ç³»ç»Ÿ**  
> æ¯å½“ç¬¬10æ¡è¯„è®ºå‘å‡ºæ—¶ï¼ŒAIè‡ªåŠ¨æ€»ç»“ï¼Œå¼€å¯ä¸‹ä¸€è½®è®¨è®º

[![Next.js](https://img.shields.io/badge/Next.js-14.2.5-black)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.17-2D3748)](https://prisma.io/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1)](https://mysql.com/)
[![Ollama](https://img.shields.io/badge/AI-Ollama-00ADD8)](https://ollama.ai/)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

**Parliament Loopï¼ˆè®®ä¼šå›ç¯ï¼‰**æ˜¯ä¸€ä¸ªåˆ›æ–°çš„AIé©±åŠ¨è®¨è®ºç³»ç»Ÿï¼Œé€šè¿‡"æ™ºæ…§æçº¯"æŠ€æœ¯å°†åˆ†æ•£çš„è§‚ç‚¹æ•´åˆä¸ºç»“æ„åŒ–çš„é›†ä½“æ™ºæ…§ã€‚

### æ ¸å¿ƒæœºåˆ¶ï¼šæ™ºæ…§æçº¯
- ğŸ“ **10æ¡è¯„è®ºè§¦å‘**ï¼šå½“ä»»ä½•è¯é¢˜æ”¶é›†åˆ°10æ¡è¯„è®ºæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨é”å®š
- ğŸ¤– **AIæ™ºèƒ½æ‘˜è¦**ï¼šä½¿ç”¨æœ¬åœ°AIæ¨¡å‹æå–å…±è¯†ã€åˆ†æ­§å’Œæ–°é—®é¢˜  
- ğŸŒ³ **æ™ºæ…§ä¹‹æ ‘**ï¼šæ¯æ¬¡æ‘˜è¦æˆä¸ºæ–°çš„è®¨è®ºèµ·ç‚¹ï¼Œå½¢æˆæ— é™é€’å½’çš„æ™ºæ…§ç»“æ„
- ğŸ”„ **å¾ªç¯è¿›åŒ–**ï¼šè¯é¢˜â†’è¯„è®ºâ†’æ‘˜è¦â†’æ–°è¯é¢˜ï¼ŒæŒç»­æ·±åŒ–è®¤çŸ¥

## âœ¨ é¡¹ç›®ç‰¹è‰²

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„
- **å…¨æ ˆä¸€ä½“åŒ–**ï¼šNext.js 14 + TypeScriptï¼Œå‰åç«¯ç»Ÿä¸€å¼€å‘ä½“éªŒ
- **åŠŸèƒ½åˆ‡ç‰‡æ¶æ„**ï¼šæŒ‰é¢†åŸŸåˆ’åˆ†ä»£ç æ¨¡å—ï¼ŒèŒè´£æ¸…æ™°æ˜“ç»´æŠ¤
- **ç±»å‹å®‰å…¨**ï¼šZodéªŒè¯ + Prisma ORMï¼Œå…¨é“¾è·¯ç±»å‹ä¿æŠ¤
- **æœ¬åœ°AIé›†æˆ**ï¼šOllamaæ”¯æŒï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨APIæœåŠ¡

### ğŸ›¡ï¸ è´¨é‡ä¿è¯
- **äº‹åŠ¡å®Œæ•´æ€§**ï¼šè¯„è®ºåˆ›å»ºå’ŒAIæ‘˜è¦åŸå­åŒ–æ“ä½œ
- **ç»Ÿä¸€é”™è¯¯å¤„ç†**ï¼šè‡ªå®šä¹‰å¼‚å¸¸ä½“ç³»ï¼Œä¼˜é›…å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µ
- **è¾“å…¥éªŒè¯**ï¼šå…¨é¢çš„æ•°æ®éªŒè¯å’Œæ¸…ç†æœºåˆ¶
- **é…ç½®é©±åŠ¨**ï¼šç¯å¢ƒå˜é‡ç»Ÿä¸€ç®¡ç†ï¼Œæ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- Node.js 18+
- Docker & Docker Compose
- Ollamaï¼ˆç”¨äºæœ¬åœ°AIæœåŠ¡ï¼‰

### 1ï¸âƒ£ å®‰è£…ä¾èµ–
```bash
git clone <repository-url>
cd parliament-loop
npm install
```

### 2ï¸âƒ£ å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨MySQLæ•°æ®åº“
docker-compose up -d

# å¯åŠ¨Ollama AIæœåŠ¡
ollama serve
ollama pull qwen2:0.5b  # ä¸‹è½½è½»é‡AIæ¨¡å‹
```

### 3ï¸âƒ£ é…ç½®ç¯å¢ƒ
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="mysql://council_user:parliament_pass_2024@localhost:3307/parliament_loop"

# AIæœåŠ¡é…ç½®ï¼ˆä½¿ç”¨æœ¬åœ°Ollamaï¼‰
OPENAI_API_KEY="test-api-key-12345"
OPENAI_BASE_URL="http://localhost:11434/v1"
AI_MODEL_NAME="qwen2:0.5b"

# åº”ç”¨é…ç½®
NODE_ENV="development"
```

### 4ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“
```bash
npx prisma db push
npx prisma generate
npx prisma db seed  # å¯é€‰ï¼šæ·»åŠ ç¤ºä¾‹æ•°æ®
```

### 5ï¸âƒ£ å¯åŠ¨åº”ç”¨
```bash
npm run dev
```

ğŸ‰ è®¿é—® `http://localhost:3001` å¼€å§‹ä½“éªŒï¼

## ğŸ“Š å¼€å‘çŠ¶æ€

### âœ… åç«¯åŠŸèƒ½ï¼ˆ100%å®Œæˆï¼‰
- [x] **APIç«¯ç‚¹å®Œæ•´**ï¼šè¯é¢˜ç®¡ç†ã€è¯„è®ºç³»ç»Ÿã€å¥åº·æ£€æŸ¥
- [x] **æ•°æ®æ¨¡å‹å®Œå–„**ï¼šæ”¯æŒå®Œæ•´çš„æ™ºæ…§æ ‘ç»“æ„
- [x] **AIé›†æˆéªŒè¯**ï¼šOllamaæœ¬åœ°æœåŠ¡é›†æˆæµ‹è¯•é€šè¿‡
- [x] **æ™ºæ…§æçº¯æœºåˆ¶**ï¼š10è¯„è®ºè§¦å‘â†’AIæ‘˜è¦â†’è¯é¢˜é”å®š
- [x] **é”™è¯¯å¤„ç†ä½“ç³»**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†å’ŒHTTPçŠ¶æ€ç æ˜ å°„
- [x] **æ•°æ®åº“äº‹åŠ¡**ï¼šè¯„è®ºåˆ›å»ºå’Œæ‘˜è¦ç”Ÿæˆçš„åŸå­æ€§æ“ä½œ

### ğŸš§ å‰ç«¯åŠŸèƒ½ï¼ˆå¾…å¼€å‘ï¼‰
- [ ] **ç”¨æˆ·ç•Œé¢**ï¼šè¯é¢˜åˆ—è¡¨ã€è¯„è®ºç•Œé¢ã€æ‘˜è¦å±•ç¤º
- [ ] **æ™ºæ…§ä¹‹æ ‘å¯è§†åŒ–**ï¼šå›¾å½¢åŒ–å±•ç¤ºè®¨è®ºç»“æ„
- [ ] **å®æ—¶æ›´æ–°**ï¼šWebSocketé›†æˆ
- [ ] **ç§»åŠ¨ç«¯é€‚é…**ï¼šå“åº”å¼è®¾è®¡
- [ ] **ç”¨æˆ·è®¤è¯**ï¼šèº«ä»½éªŒè¯å’Œæƒé™ç®¡ç†

## ğŸ“ é¡¹ç›®ç»“æ„

```
parliament-loop/
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/                # APIè·¯ç”±å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ topics/         # è¯é¢˜ç›¸å…³API
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ comments/       # è¯„è®ºç›¸å…³API
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ health/         # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ layout.tsx             # æ ¹å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ page.tsx               # é¦–é¡µç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ features/               # åŠŸèƒ½æ¨¡å—ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“ topics/             # è¯é¢˜åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ ğŸ“ comments/           # è¯„è®ºåŠŸèƒ½
â”‚   â”‚   â””â”€â”€ ğŸ“ summaries/          # æ‘˜è¦åŠŸèƒ½
â”‚   â”œâ”€â”€ ğŸ“ lib/                    # åŸºç¡€åº“
â”‚   â”‚   â”œâ”€â”€ config.ts              # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ exceptions.ts          # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â””â”€â”€ prisma.ts              # æ•°æ®åº“å®¢æˆ·ç«¯
â”‚   â””â”€â”€ ğŸ“ styles/                 # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“ prisma/                     # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.prisma              # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ seed.ts                    # åˆå§‹æ•°æ®
â”œâ”€â”€ ğŸ“ tests/                      # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“ docs/                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ docker-compose.yml             # Dockeré…ç½®
â”œâ”€â”€ package.json                   # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£
```

## ï¿½ï¸ æ ¸å¿ƒå‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm run dev` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `npm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `npm run start` | è¿è¡Œç”Ÿäº§æœåŠ¡å™¨ |
| `npm run lint` | ä»£ç è´¨é‡æ£€æŸ¥ |
| `npm test` | è¿è¡Œå•å…ƒæµ‹è¯• |
| `npx prisma studio` | æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢ |
| `npx prisma db push` | åŒæ­¥æ•°æ®åº“ç»“æ„ |
| `npx prisma db seed` | é‡ç½®å¹¶å¡«å……æµ‹è¯•æ•°æ® |

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ•°æ®æ¨¡å‹è®¾è®¡
```prisma
model Topic {
  id        String     @id @default(cuid())
  title     String
  status    String     @default("active") // active | locked
  createdAt DateTime   @default(now())
  comments  Comment[]
  summaries Summary[]
}

model Comment {
  id        String    @id @default(cuid())
  content   String    @db.Text
  author    String?
  topicId   String?   // å…³è”åˆ°Topic
  summaryId String?   // å…³è”åˆ°Summary
}

model Summary {
  id        String    @id @default(cuid())
  content   String    @db.Text
  metadata  Json?     // AIè¿”å›çš„å®Œæ•´æ•°æ®
  topicId   String    // æ ¹è¯é¢˜ID
  parentId  String?   // çˆ¶æ‘˜è¦IDï¼ˆæ”¯æŒæ— é™åµŒå¥—ï¼‰
}
```

### AIæç¤ºè¯å·¥ç¨‹
```
ä½ æ˜¯ä¸€ä¸ªç»å¯¹ä¸­ç«‹ã€é€»è¾‘ä¸¥è°¨ã€ç²¾é€šä¿¡æ¯æçº¯çš„"ä¹¦è®°å®˜"ã€‚
è¯·å°†10æ¡è¯„è®ºæ€»ç»“ä¸ºJSONæ ¼å¼ï¼ŒåŒ…å«ï¼š
- consensus: æ ¸å¿ƒå…±è¯†
- disagreements: ä¸»è¦åˆ†æ­§ç‚¹
- new_questions: æœ‰ä»·å€¼çš„æ–°é—®é¢˜
```

### APIæ¥å£è®¾è®¡
- `GET /api/topics` - è·å–æ‰€æœ‰è¯é¢˜åˆ—è¡¨
- `POST /api/topics` - åˆ›å»ºæ–°è¯é¢˜
- `GET /api/topics/[id]` - è·å–å®Œæ•´æ™ºæ…§æ ‘ç»“æ„
- `POST /api/comments` - æäº¤è¯„è®ºï¼ˆå¯èƒ½è§¦å‘AIæ‘˜è¦ï¼‰
- `GET /api/health` - ç³»ç»Ÿå¥åº·æ£€æŸ¥

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ–ï¸ è‡´è°¢

- **Next.jså›¢é˜Ÿ** - å‡ºè‰²çš„å…¨æ ˆæ¡†æ¶
- **Prismaå›¢é˜Ÿ** - ç±»å‹å®‰å…¨çš„ORM
- **Ollamaç¤¾åŒº** - æœ¬åœ°AIæœåŠ¡æ”¯æŒ
- **æ‰€æœ‰è´¡çŒ®è€…** - è®©æ™ºæ…§æçº¯æˆä¸ºç°å®

---

<div align="center">

**Parliament Loop - è®©é›†ä½“æ™ºæ…§å¾ªç¯è¿›åŒ–**

[ğŸŒ åœ¨çº¿æ¼”ç¤º](https://parliament-loop.example.com) â€¢ [ğŸ“– å®Œæ•´æ–‡æ¡£](./docs/) â€¢ [ğŸ› é—®é¢˜åé¦ˆ](https://github.com/your-repo/issues)

</div>

